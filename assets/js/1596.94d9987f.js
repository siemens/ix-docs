"use strict";(self.webpackChunkix_documentation=self.webpackChunkix_documentation||[]).push([[1596],{11596:(e,t,s)=>{s.r(t),s.d(t,{ix_dropdown:()=>l});var i=s(66835),o=s(38163),r=s(50699),n=s(69498),d=s(86418),h=s(46462);let a=0;const l=class{constructor(e){(0,i.r)(this,e),this.showChanged=(0,i.c)(this,"showChanged",7),this.suppressAutomaticPlacement=!1,this.show=!1,this.closeBehavior="both",this.placement="bottom-start",this.positioningStrategy="fixed",this.discoverAllSubmenus=!1,this.ignoreRelatedSubmenu=!1,this.suppressOverflowBehavior=!1,this.localUId="dropdown-"+a++,this.assignedSubmenu=[],this.itemObserver=new MutationObserver((()=>{this.arrowFocusController&&(this.arrowFocusController.items=this.dropdownItems)}))}connectedCallback(){n.d.connected(this),null!=this.trigger&&this.registerListener(this.trigger)}cacheSubmenuId(e){e.stopImmediatePropagation(),e.preventDefault();const{detail:t}=e;-1===this.assignedSubmenu.indexOf(t)&&this.assignedSubmenu.push(t)}disconnectedCallback(){var e;n.d.dismiss(this),n.d.disconnected(this),this.arrowFocusController&&(null===(e=this.arrowFocusController)||void 0===e||e.disconnect(),this.arrowFocusController=void 0),this.itemObserver&&(this.itemObserver.disconnect(),this.itemObserver=void 0),this.disposeClickListener&&(this.disposeClickListener(),this.disposeClickListener=void 0),this.disposeKeyListener&&(this.disposeKeyListener(),this.disposeKeyListener=void 0),this.autoUpdateCleanup&&(this.autoUpdateCleanup(),this.autoUpdateCleanup=void 0)}getAssignedSubmenuIds(){return this.assignedSubmenu}isPresent(){return this.show}present(){this.show=!0}dismiss(){this.show=!1}getId(){return this.localUId}willDismiss(){const{defaultPrevented:e}=this.showChanged.emit(!1);return!e}willPresent(){const{defaultPrevented:e}=this.showChanged.emit(!0);return!e}get dropdownItems(){return Array.from(this.hostElement.querySelectorAll("ix-dropdown-item"))}get slotElement(){return this.hostElement.shadowRoot.querySelector("slot")}addEventListenersFor(){var e,t,s;null===(e=this.disposeClickListener)||void 0===e||e.call(this),null===(t=this.disposeKeyListener)||void 0===t||t.call(this);const i=()=>{this.isPresent()?n.d.dismiss(this):n.d.present(this),n.d.dismissOthers(this.getId())};this.triggerElement&&(this.disposeClickListener=(0,h.a)(this.triggerElement,"click",(e=>{e.defaultPrevented||i()})),null===(s=this.triggerElement)||void 0===s||s.setAttribute("data-ix-dropdown-trigger",this.localUId))}async discoverSubmenu(){var e;null===(e=this.triggerElement)||void 0===e||e.dispatchEvent(new CustomEvent("ix-assign-sub-menu",{bubbles:!0,composed:!0,cancelable:!0,detail:this.localUId}))}registerKeyListener(){this.triggerElement&&(this.disposeKeyListener=(0,h.a)(this.triggerElement,"keydown",(e=>{"ArrowDown"===e.key&&document.activeElement===this.triggerElement&&(n.d.present(this),setTimeout((()=>{this.focusDropdownItem(0)})))})))}async registerListener(e){this.triggerElement=await this.resolveElement(e),this.triggerElement&&(this.addEventListenersFor(),this.discoverSubmenu())}async resolveElement(e){const t=await(0,d.f)(e);return this.checkForSubmenuAnchor(t)}async checkForSubmenuAnchor(e){if(e){if((0,n.h)(e)){(await e.getDropdownItemElement()).isSubMenu=!0,this.hostElement.style.zIndex="var(--theme-z-index-dropdown)"}return"IX-DROPDOWN-ITEM"===e.tagName&&(e.isSubMenu=!0,this.hostElement.style.zIndex="var(--theme-z-index-dropdown)"),e}}async resolveAnchorElement(){this.anchor?this.anchorElement=await this.resolveElement(this.anchor):this.trigger&&(this.anchorElement=await this.resolveElement(this.trigger))}async changedShow(e){var t,s,i,o;e?(await this.resolveAnchorElement(),this.anchorElement&&this.applyDropdownPosition(),this.arrowFocusController=new r.A(this.dropdownItems,this.hostElement,(e=>this.focusDropdownItem(e))),null===(t=this.itemObserver)||void 0===t||t.observe(this.hostElement,{childList:!0,subtree:!0}),this.registerKeyListener()):(this.destroyAutoUpdate(),null===(s=this.arrowFocusController)||void 0===s||s.disconnect(),null===(i=this.itemObserver)||void 0===i||i.disconnect(),null===(o=this.disposeKeyListener)||void 0===o||o.call(this))}changedTrigger(e){this.registerListener(e)}destroyAutoUpdate(){this.autoUpdateCleanup&&(this.autoUpdateCleanup(),this.autoUpdateCleanup=void 0)}isAnchorSubmenu(){var e;return!!(0,n.h)(this.anchorElement)||!!(null===(e=this.anchorElement)||void 0===e?void 0:e.closest("ix-dropdown-item"))}async applyDropdownPosition(){var e,t;if(!this.show)return;if(!this.anchorElement)return;const s=this.isAnchorSubmenu();let i={strategy:this.positioningStrategy,middleware:[]};this.suppressAutomaticPlacement||null===(e=i.middleware)||void 0===e||e.push((0,o.f)({fallbackStrategy:"initialPlacement"})),i.placement=s?"right-start":this.placement,i.middleware=[...(null===(t=i.middleware)||void 0===t?void 0:t.filter(Boolean))||[],(0,o.i)(),(0,o.s)()],this.offset&&i.middleware.push((0,o.o)(this.offset)),this.destroyAutoUpdate(),this.anchorElement&&(this.autoUpdateCleanup=(0,o.a)(this.anchorElement,this.hostElement,(async()=>{if(this.anchorElement){const e=await(0,o.c)(this.anchorElement,this.hostElement,i);Object.assign(this.hostElement.style,{top:"0",left:"0",transform:`translate(${Math.round(e.x)}px,${Math.round(e.y)}px)`})}if(this.overwriteDropdownStyle){const e=await this.overwriteDropdownStyle({dropdownRef:this.hostElement,triggerRef:this.triggerElement});Object.assign(this.hostElement.style,e)}}),{ancestorResize:!0,ancestorScroll:!0,elementResize:!0}))}focusDropdownItem(e){requestAnimationFrame((()=>{var t,s;const i=null===(s=null===(t=this.dropdownItems[e])||void 0===t?void 0:t.shadowRoot)||void 0===s?void 0:s.querySelector("button");i&&i.focus()}))}async componentDidLoad(){this.trigger&&this.changedTrigger(this.trigger)}async componentDidRender(){await this.applyDropdownPosition(),await this.resolveAnchorElement()}isTriggerElement(e){return!!e.hasAttribute("data-ix-dropdown-trigger")}onDropdownClick(e){const t=n.d.pathIncludesTrigger(e.composedPath());t&&(t!==this.triggerElement&&e.preventDefault(),this.isTriggerElement(t))?"outside"===this.closeBehavior&&e.preventDefault():e.defaultPrevented||"inside"!==this.closeBehavior&&"both"!==this.closeBehavior?n.d.dismissOthers(this.getId()):n.d.dismissAll([this.getId()],this.ignoreRelatedSubmenu)}async updatePosition(){this.applyDropdownPosition()}render(){return(0,i.h)(i.H,{key:"d54c0ad79513d4a564be19f747cca05b85098672","data-ix-dropdown":this.localUId,class:{"dropdown-menu":!0,show:this.show,overflow:!this.suppressOverflowBehavior},style:{margin:"0",minWidth:"0px",position:this.positioningStrategy},role:"list",onClick:e=>this.onDropdownClick(e)},(0,i.h)("div",{key:"87156dc26d388771694bdd0e780f686e10d4fe65",style:{display:"contents"}},this.header&&(0,i.h)("div",{key:"d15f860e42ea138f7ce06b2da188f439ddf033ff",class:"dropdown-header"},this.header),this.show&&(0,i.h)("slot",{key:"fa6bef0ff0885d610de9ad6e1d5884da93438e9d"})))}get hostElement(){return(0,i.g)(this)}static get watchers(){return{show:["changedShow"],trigger:["changedTrigger"]}}};l.style=":host{background-color:var(--theme-color-2);border-radius:var(--theme-default-border-radius);min-width:0px;z-index:var(--theme-z-index-dropdown);box-shadow:var(--theme-shadow-4);padding:0.25rem 0px}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}@-moz-document url-prefix(){:host *{scrollbar-color:var(--theme-scrollbar-thumb--background) var(--theme-scrollbar-track--background);scrollbar-width:thin}}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}:host .dropdown-header{display:flex;align-items:center;height:2.5rem;color:var(--theme-menu-header--color);padding:0 1rem}:host(.overflow){max-height:50vh;overflow-y:auto}:host(:not(.show)){display:none}"},46462:(e,t,s)=>{s.d(t,{a:()=>i,b:()=>o});const i=(e,t,s)=>(e.addEventListener(t,s),()=>{e.removeEventListener(t,s)}),o=e=>{const t=e.map((({callback:e,element:t,eventType:s})=>i(t,s,e)));return()=>t.forEach((e=>e()))}},50699:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(46462);class o{constructor(e,t,s){this.wrap=!1,this.items=e,this.container=t,this.callback=s,this.keyListener=(0,i.a)(t,"keydown",(e=>this.onKeyDown(e)))}getActiveIndex(){return document.activeElement?this.items.indexOf(document.activeElement):-1}onKeyDown(e){var t,s,i,o;const r=this.getActiveIndex();if(!(r<0))switch(e.key){case"ArrowDown":r<this.items.length-1?(e.preventDefault(),null===(t=this.callback)||void 0===t||t.call(this,r+1)):this.wrap&&(e.preventDefault(),null===(s=this.callback)||void 0===s||s.call(this,0));break;case"ArrowUp":r>0?(e.preventDefault(),null===(i=this.callback)||void 0===i||i.call(this,r-1)):this.wrap&&0===r&&(e.preventDefault(),null===(o=this.callback)||void 0===o||o.call(this,this.items.length-1))}}disconnect(){this.keyListener&&this.keyListener(),this.container=void 0,this.callback=void 0}}},69498:(e,t,s)=>{function i(e){return null!==e&&void 0!==e.getDropdownItemElement&&"function"==typeof e.getDropdownItemElement}s.d(t,{d:()=>o,h:()=>i});const o=new class{constructor(){this.dropdowns=new Map,this.submenuIds={},this.isWindowListenerActive=!1}connected(e){this.isWindowListenerActive||this.addOverlayListeners(),this.dropdowns.set(e.getId(),e),e.discoverAllSubmenus&&this.discoverSubmenus()}disconnected(e){const t=e.getId();this.removeFromSubmenuIds(t),this.dropdowns.delete(t)}removeFromSubmenuIds(e){this.dropdowns.forEach((t=>{const s=this.submenuIds[t.getId()];if(s){const t=s.indexOf(e);t>-1&&s.splice(t,1)}})),delete this.submenuIds[e]}getDropdownById(e){return this.dropdowns.get(e)}discoverSubmenus(){this.dropdowns.forEach((e=>{e.discoverSubmenu()}))}present(e){var t;!e.isPresent()&&(null===(t=e.willPresent)||void 0===t?void 0:t.call(e))&&(this.submenuIds[e.getId()]=e.getAssignedSubmenuIds(),e.present())}dismissChildren(e){const t=this.submenuIds[e]||[];for(const s of t){const e=this.dropdowns.get(s);e&&this.dismiss(e)}}dismiss(e){var t;e.isPresent()&&(null===(t=e.willDismiss)||void 0===t?void 0:t.call(e))&&(this.dismissChildren(e.getId()),e.dismiss(),delete this.submenuIds[e.getId()])}dismissAll(e=[],t=!1){this.dropdowns.forEach((s=>{const i="inside"===s.closeBehavior||!1===s.closeBehavior,o=e.includes(s.getId()),r=this.buildComposedPath(s.getId(),new Set);if(e.length>0&&t){let t=!1;if(e.forEach((e=>{r.has(e)&&(t=!0)})),!t)return}!o&&i||this.dismiss(s)}))}dismissOthers(e){let t=this.buildComposedPath(e,new Set);t.add(e),this.dropdowns.forEach((e=>{"inside"===e.closeBehavior||!1===e.closeBehavior||t.has(e.getId())||this.dismiss(e)}))}pathIncludesTrigger(e){for(let t of e)if(t instanceof HTMLElement&&t.hasAttribute("data-ix-dropdown-trigger"))return t}pathIncludesDropdown(e){return!!e.find((e=>"IX-DROPDOWN"===e.tagName))}buildComposedPath(e,t){this.submenuIds[e]&&t.add(e);for(const s of Object.keys(this.submenuIds))this.submenuIds[s].includes(e)&&this.buildComposedPath(s,t).forEach((e=>t.add(e)));return t}addOverlayListeners(){this.isWindowListenerActive=!0,window.addEventListener("click",(e=>{const t=this.pathIncludesTrigger(e.composedPath()),s=this.pathIncludesDropdown(e.composedPath());t||s||this.dismissAll()})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&this.dismissAll([...this.dropdowns.keys()])}))}}},86418:(e,t,s)=>{async function i(e,t){const s=Array.from(document.querySelectorAll(e));if(s.length>0)return Promise.resolve(s);if(void 0===t)return Promise.resolve(void 0);const i=function(e,t=document.body){if(!e.parentElement&&!e.parentNode)return;if(e.parentNode instanceof ShadowRoot)return e.parentNode;let s=e.parentElement;for(;s;){if(s.shadowRoot)return s.shadowRoot;if(s.parentNode instanceof ShadowRoot)return s.parentNode;s=s.parentElement}return t}(t);if(void 0===i||!(i instanceof ShadowRoot))return Promise.resolve(void 0);const o=Array.from(i.querySelectorAll(e)),r=[...Array.from(i.host.querySelectorAll(e)),...o];return r.length>0?Promise.resolve(r):Promise.resolve(void 0)}function o(e,t){if(e instanceof Promise)return e;if("object"==typeof e)return Promise.resolve(e);return function(e,t=document,s){return new Promise((o=>{const r=()=>{i(e,s).then((e=>{e&&e.length>0&&(o(e[0]),null==n||n.disconnect())}))};r();const n=new MutationObserver((()=>{r()}));n.observe(t.body,{childList:!0,subtree:!0})}))}(`#${e}`,document,t)}s.d(t,{f:()=>o,r:()=>i})}}]);